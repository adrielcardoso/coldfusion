dBoxAuthenticated=false;
WCloudManager=function(){__$cf._log("in WCloudManager");var self=this;this.callBackStack=new Array;this.retVal="";this.successObject=new DnfiStatus("WCloudManager",dnfi.SUCCESS.code,dnfi.SUCCESS.message);this.pEcho=function(str,callback){cordova.exec(callback,function(err){callback("Nothing to echo.")},"CloudManager","echo",[str])};this.pDropBoxAuthenticate=function(callback,fail){__$cf._log("in JS authenticate()");cordova.exec(callback,fail,"CloudManager","authenticate",[])};this.pUpload=function(callback,
fail,dest,src){__$cf._log("in JS upload()");cordova.exec(callback,fail,"CloudManager","upload",[dest,src])};this.pDownload=function(callback,fail,dest,src){__$cf._log("in JS download()");cordova.exec(callback,fail,"CloudManager","download",[dest,src])};this.isDropBoxAuthenticated=function(){return dBoxAuthenticated};this.dropBoxAuthenticate=function(context){self.callBackStack=context.cb;self.retVal=context.ret;if(self.isDropBoxAuthenticated()){__$cf._log("dropBox already authenticated");runCallBacks(self.callBackStack,
self.successObject,true);return}self.pDropBoxAuthenticate(function(){dBoxAuthenticated=true;__$cf._log("dropBox authenticated now");runCallBacks(self.callBackStack,self.successObject,true);return},function(){__$cf._log("DropBox Authentication Failed");runCallBacks(self.callBackStack,new DnfiStatus(wCloudManagerError.AUTHENTICATION_ERROR.code,wCloudManagerError.AUTHENTICATION_ERROR.message))});return};this.dropBoxUpload=function(context,dest,src){var upload_f=function(context){self.callBackStack=context.cb;
self.retVal=context.ret;self.pUpload(function(){runCallBacks(self.callBackStack,self.successObject,true)},function(e){runCallBacks(self.callBackStack,new DnfiStatus(wCloudManagerError.UPLOAD_ERROR.code,wCloudManagerError.UPLOAD_ERROR.message))},dest,src)};if(self.isDropBoxAuthenticated()){__$cf._log("Upload function - dropBox already authenticated");upload_f(context);return}else self.dropBoxAuthenticate({cb:[function(e){__$cf._log("calling dropBoxAuthenticate within cloud.js constructor");self.callBackStack=
context.cb;self.retVal=context.ret;if(e.code==dnfi.SUCCESS.code){__$cf._log("Authentication Successful - cloud.js");upload_f(context);return}else{__$cf._log("Authentication Failed");runCallBacks(self.callBackStack,e)}}],ret:"ret"})};this.dropBoxDownload=function(context,dest,src){var download_f=function(context){self.callBackStack=context.cb;self.retVal=context.ret;self.pDownload(function(){runCallBacks(self.callBackStack,self.successObject,true)},function(e){runCallBacks(self.callBackStack,new DnfiStatus(wCloudManagerError.DOWNLOAD_ERROR.code,
wCloudManagerError.DOWNLOAD_ERROR.message))},dest,src)};if(self.isDropBoxAuthenticated()){__$cf._log("Download function - dropBox already authenticated");download_f(context);return}else self.dropBoxAuthenticate({cb:[function(e){__$cf._log("calling dropBoxAuthenticate within cloud.js constructor");self.callBackStack=context.cb;self.retVal=context.ret;if(e.code==dnfi.SUCCESS.code){__$cf._log("Authentication Successful - cloud.js");download_f(context);return}else{__$cf._log("Authentication Failed");
runCallBacks(self.callBackStack,e)}}],ret:"ret"})};return self};
