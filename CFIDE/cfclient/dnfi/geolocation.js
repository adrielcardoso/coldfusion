var WGeoLocation=function(){if(typeof navigator.geolocation!="undefined"){__$cf._log("Initializing GeoLocation...");var self=this;this.successObject=new DnfiStatus("geolocation",dnfi.SUCCESS.code,dnfi.SUCCESS.message);this.options={"enableHighAccuracy":false,"maximumAge":3E3,"timeout":1E4};var handleError=function(context,e,retVal){var dnfiError=null;if(e.code==PositionError.PERMISSION_DENIED)dnfiError=new DnfiStatus("WGeoLocation",wGeoLocationError.PERMISSION_DENIED_ERROR.code,wGeoLocationError.PERMISSION_DENIED_ERROR.message);
else if(e.code==PositionError.POSITION_UNAVAILABLE)dnfiError=new DnfiStatus("WGeoLocation",wGeoLocationError.POSITION_UNAVAILABLE_ERROR.code,wGeoLocationError.POSITION_UNAVAILABLE_ERROR.message);else if(e.code==PositionError.TIMEOUT)dnfiError=new DnfiStatus("WGeoLocation",wGeoLocationError.TIMEOUT_ERROR.code,wGeoLocationError.TIMEOUT_ERROR.message);if(dnfiError==null)dnfiError=new DnfiStatus("WGeoLocation",wGeoLocationError.GENERAL_ERROR.code,wGeoLocationError.GENERAL_ERROR.message);runCallBacks(context.cb,
dnfiError,retVal)};this.setOptions=function(context,opts){if(_validateDeviceAPI(context,arguments.length-1,1,"setOptions"))if(typeof opts!="undefined"&&opts!=null){_updateProperties(self.options,opts);runCallBacks(context.cb,self.successObject,null)}else runCallBacks(context.cb,new DnfiStatus("WGeoLocation",wGeoLocationError.INVALID_ARGUMENT_ERROR.code,wGeoLocationError.INVALID_ARGUMENT_ERROR.message),null)};this.getOptions=function(context){runCallBacks(context.cb,self.successObject,self.options)};
this.getCurrentPosition=function(context,opts){var successcb=function(pos){__$cf._log("got current position");runCallBacks(context.cb,self.successObject,pos);return};var failcb=function(e){__$cf._log("get current position error, code = "+e.code+", message = "+e.message);handleError(context,e,null);return};var tempOptions=self.options;if(typeof opts!="undefined"&&opts!=null)_updateProperties(tempOptions,opts);navigator.geolocation.getCurrentPosition(successcb,failcb,tempOptions)};this.watchPosition=
function(context,cbObj,opts){if(_validateDeviceAPI(context,arguments.length-1,1,"watchPosition")){var failcb=function(e){__$cf._log("watch position error, code = "+e.code+", message = "+e.message);handleError(context,e,null);return};var tempOptions=self.options;if(typeof opts!="undefined"&&opts!=null)_updateProperties(tempOptions,opts);var callbackFunction=null;if(typeof cbObj=="string")callbackFunction=_getFunctionForName(cbObj);else callbackFunction=cbObj;var _cb=function(pos){if(typeof pos.coords.altitudeAccuracy!=
"undefined")pos.coords.altitudeaccuracy=pos.coords.altitudeAccuracy;var argsArray=[pos];callbackFunction.apply(cbObj,argsArray)};if(typeof callbackFunction=="function"){var watchId=navigator.geolocation.watchPosition(_cb,failcb,tempOptions);runCallBacks(context.cb,self.successObject,watchId)}else runCallBacks(context.cb,new DnfiStatus("WGeoLocation",wGeoLocationError.CALLBACK_ERROR.code,wGeoLocationError.CALLBACK_ERROR.message),null);return}};this.clearWatch=function(context,wId){if(_validateDeviceAPI(context,
arguments.length-1,1,"clearWatch")){navigator.geolocation.clearWatch(wId);runCallBacks(context.cb,self.successObject,null);return}}}};
