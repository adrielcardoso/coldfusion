var WVideo=function(){if(typeof navigator.device!="undefined"&&typeof navigator.device.capture!="undefined"){__$cf._log("Initializing Video...");var self=this;this.successObject=new DnfiStatus("video",dnfi.SUCCESS.code,dnfi.SUCCESS.message);this.callBackStack=new Array;this.options=new Object;this.options.limit=1;this.options.duration=20;var handleError=function(context,e,retVal){var dnfiError=null;if(e.code==CaptureError.CAPTURE_INTERNAL_ERR)dnfiError=new DnfiStatus("wVideo",wVideoError.CAPTURE_INTERNAL_ERROR.code,
wVideoError.CAPTURE_INTERNAL_ERROR.message);else if(e.code==CAPTURE_APPLICATION_BUSY)dnfiError=new DnfiStatus("wVideo",wVideoError.CAPTURE_APPLICATION_BUSY_ERROR.code,wVideoError.CAPTURE_APPLICATION_BUSY_ERROR.message);else if(e.code==CAPTURE_INVALID_ARGUMENT)dnfiError=new DnfiStatus("wVideo",wVideoError.CAPTURE_INVALID_ARGUMENT_ERROR.code,wVideoError.CAPTURE_INVALID_ARGUMENT_ERROR.message);else if(e.code==CAPTURE_NO_MEDIA_FILES)dnfiError=new DnfiStatus("wVideo",wVideoError.CAPTURE_NO_MEDIA_FILES_ERROR.code,
wVideoError.CAPTURE_NO_MEDIA_FILES_ERROR.message);else if(e.code==CAPTURE_NOT_SUPPORTED)dnfiError=new DnfiStatus("wVideo",wVideoError.CAPTURE_NOT_SUPPORTED_ERROR.code,wVideoError.CAPTURE_NOT_SUPPORTED_ERROR.message);if(dnfiError==null)dnfiError=new DnfiStatus("wVideo",wVideoError.GENERAL_ERROR.code,wVideoError.GENERAL_ERROR.message);runCallBacks(context.cb,dnfiError,retVal)};this.getOptions=function(context){runCallBacks(context.cb,self.successObject,self.options)};this.setOptions=function(context,
opts){if(_validateDeviceAPI(context,arguments.length-1,1,"setOptions")){if(typeof opts!="undefined"&&opts!=null)_updateProperties(self.options,opts);runCallBacks(context.cb,self.successObject,null)}};this.capture=function(context,opts,cbFunction){var captureOptions=self.options;if(typeof opts!="undefined"&&opts!=null)_updateProperties(captureOptions,opts);var callbackFunction=null;if(typeof cbFunction=="string")callbackFunction=_getFunctionForName(cbFunction);else callbackFunction=cbFunction;if(typeof cbFunction!=
"undefined"&&typeof callbackFunction!="function")runCallBacks(context.cb,new DnfiStatus("WVideo",wVideoError.CALLBACK_ERROR.code,wVideoError.CALLBACK_ERROR.message),null);else{var captureCB=function(mediaFile){__$cf._log("Video capture successful");console.log(typeof callbackFunction);if(typeof callbackFunction=="function"){var argsArray=[mediaFile];callbackFunction.apply(callbackFunction,argsArray)}else runCallBacks(context.cb,self.successObject,mediaFile)};function error(e){handleError(context,
e,null)}navigator.device.capture.captureVideo(captureCB,error,captureOptions)}}}};
